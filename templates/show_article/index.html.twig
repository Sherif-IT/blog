{% extends 'base.html.twig' %}

{% block title %}Hello BlogController!{% endblock %}
{% block style %} 
    <link href="{{asset('css/showArticle.css')}}" rel="stylesheet">
{% endblock %}
{% block body %} 

<div class="example-wrapper"> 

    <main>
        
        <div class="single-news">
            <div class="container">
                <div class="row">
                    <div class="col-lg-8">
                        <div class="sn-container">
                            <div class="sn-img">
                                <img src="{{ asset('uploads/post/thumbnails/' ~ article.largeHeaderImage) }}">
                            </div>
                            <div class="sn-content">
                                <section class="article-content-section">
                                    <div> 
                                        <div class="article-title">
                                            <h2>
                                                {{article.titre}}
                                            </h2>
                                        </div> 
                                        <div id="toolbar-container">
                                            <!--<button class="ql-bold" data-toggle="tooltip" data-placement="bottom" title="Bold"></button>
                                            <button class="ql-italic" data-toggle="tooltip" data-placement="bottom" title="Add italic text <cmd+i>"></button>-->    
                                          </div>
                                        <div class="article-content " id="editor" data-service="{{article.contenu}}">
                                            <pre> 
                                            </pre>
                                        </div>
                                    </div>
                                </section>
                                <section class="comment-section mt-4 pt-4">
                                        <div class="comments-show mt-5">
                                        {% if comments is defined %}<ul class="media-list">
                                                <ul class="pl-1"> 
                                                    {% for comment in comments %}
                                                    <li class="media">   
                                                        <a href="#" class="pull-left mr-4">
                                                            <img src="https://bootdey.com/img/Content/user_1.jpg" alt="" class="img-circle rounded-circle">
                                                        </a>
                                                        <div class="media-body">
                                                            <span class="text-muted float-right pr-4 pr-lg-5 mr-lg-5">
                                                                <small class="text-muted">30 min ago</small>
                                                            </span>
                                                            <strong class="text-success">@MartinoMont</strong>
                                                            <p>
                                                                {{comment.contenu}}<a href="#">#consecteturadipiscing </a>.
                                                            </p>
                                                        </div>
                                                    </li>
                                                    {% endfor %} 
                                                </ul> 
                                        {% endif %}
                                        </div>   
                                        <div class="comments-edit px-4">
                                        {{ form_start(form) }}
                                        <div class="form-group  content" >
                                        {{ form_row(form.contenu) }}
                                        </div>
                                        {{ form_end(form) }}
                                    </div>   
                                </section>
                            </div>
                        </div>
                        <!-- 
                        <div class="sn-related">
                                <h2>Related News</h2>
                                <div class="row sn-slider">
                                    <div class="col-md-4">
                                        <div class="sn-img">
                                            <img src="{{asset('img/news-350x223-1.jpg')}}" />
                                            <div class="sn-title">
                                                <a href="">Interdum et fames ac ante</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="sn-img">
                                            <img src="http://127.0.0.1:8000/img/news-350x223-2.jpg" />
                                            <div class="sn-title">
                                                <a href="">Interdum et fames ac ante</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="sn-img">
                                            <img src="img/news-350x223-3.jpg" />
                                            <div class="sn-title">
                                                <a href="">Interdum et fames ac ante</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="sn-img">
                                            <img src="img/news-350x223-4.jpg" />
                                            <div class="sn-title">
                                                <a href="">Interdum et fames ac ante</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                        </div> -->
                    </div>

                    <div class="col-lg-4">
                        <div class="sidebar">
                            <div class="sidebar-widget">
                                <h2 class="sw-title">In This Category</h2>
                                <div class="news-list">
                                    {% for relatedArticle in relatedArticles %}
                                        <div class="nl-item">
                                            <div class="nl-img">
                                                <img src="{{ asset('uploads/post/thumbnails/' ~ relatedArticle.thumbnailFilename) }}">
                                            </div>
                                            <div class="nl-title">
                                                <a href="">{{relatedArticle.titre}}</a>
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                            
                            <div class="sidebar-widget">
                                <div class="image">
                                    <a href="https://htmlcodex.com"><img src="img/ads-2.jpg" alt="Image"></a>
                                </div>
                            </div>
                            
                            <div class="sidebar-widget">
                                <div class="tab-news">
                                    <ul class="nav nav-pills nav-justified">
                                        <li class="nav-item">
                                            <a class="nav-link active" data-toggle="pill" href="#featured">Featured</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-toggle="pill" href="#popular">Popular</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-toggle="pill" href="#latest">Latest</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div id="featured" class="container tab-pane active">
                                            <div class="tn-news">
                                                <div class="tn-img">
                                                    <img src="img/news-350x223-1.jpg">
                                                </div>
                                                <div class="tn-title">
                                                    <a href="">Lorem ipsum dolor sit amet consec adipis elit</a>
                                                </div>
                                            </div>
                                            <div class="tn-news">
                                                <div class="tn-img">
                                                    <img src="img/news-350x223-2.jpg">
                                                </div>
                                                <div class="tn-title">
                                                    <a href="">Lorem ipsum dolor sit amet consec adipis elit</a>
                                                </div>
                                            </div>
                                            <div class="tn-news">
                                                <div class="tn-img">
                                                    <img src="img/news-350x223-3.jpg">
                                                </div>
                                                <div class="tn-title">
                                                    <a href="">Lorem ipsum dolor sit amet consec adipis elit</a>
                                                </div>
                                            </div>
                                            <div class="tn-news">
                                                <div class="tn-img">
                                                    <img src="img/news-350x223-4.jpg">
                                                </div>
                                                <div class="tn-title">
                                                    <a href="">Lorem ipsum dolor sit amet consec adipis elit</a>
                                                </div>
                                            </div>
                                            <div class="tn-news">
                                                <div class="tn-img">
                                                    <img src="img/news-350x223-5.jpg">
                                                </div>
                                                <div class="tn-title">
                                                    <a href="">Lorem ipsum dolor sit amet consec adipis elit</a>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="popular" class="container tab-pane fade">
                                            <div class="tn-news">
                                                <div class="tn-img">
                                                    <img src="img/news-350x223-4.jpg">
                                                </div>
                                                <div class="tn-title">
                                                    <a href="">Lorem ipsum dolor sit amet consec adipis elit</a>
                                                </div>
                                            </div>
                                            <div class="tn-news">
                                                <div class="tn-img">
                                                    <img src="img/news-350x223-3.jpg">
                                                </div>
                                                <div class="tn-title">
                                                    <a href="">Lorem ipsum dolor sit amet consec adipis elit</a>
                                                </div>
                                            </div>
                                            <div class="tn-news">
                                                <div class="tn-img">
                                                    <img src="img/news-350x223-2.jpg">
                                                </div>
                                                <div class="tn-title">
                                                    <a href="">Lorem ipsum dolor sit amet consec adipis elit</a>
                                                </div>
                                            </div>
                                            <div class="tn-news">
                                                <div class="tn-img">
                                                    <img src="img/news-350x223-1.jpg">
                                                </div>
                                                <div class="tn-title">
                                                    <a href="">Lorem ipsum dolor sit amet consec adipis elit</a>
                                                </div>
                                            </div>
                                            <div class="tn-news">
                                                <div class="tn-img">
                                                    <img src="img/news-350x223-2.jpg">
                                                </div>
                                                <div class="tn-title">
                                                    <a href="">Lorem ipsum dolor sit amet consec adipis elit</a>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="latest" class="container tab-pane fade">
                                            <div class="tn-news">
                                                <div class="tn-img">
                                                    <img src="img/news-350x223-3.jpg">
                                                </div>
                                                <div class="tn-title">
                                                    <a href="">Lorem ipsum dolor sit amet consec adipis elit</a>
                                                </div>
                                            </div>
                                            <div class="tn-news">
                                                <div class="tn-img">
                                                    <img src="img/news-350x223-4.jpg">
                                                </div>
                                                <div class="tn-title">
                                                    <a href="">Lorem ipsum dolor sit amet consec adipis elit</a>
                                                </div>
                                            </div>
                                            <div class="tn-news">
                                                <div class="tn-img">
                                                    <img src="img/news-350x223-5.jpg">
                                                </div>
                                                <div class="tn-title">
                                                    <a href="">Lorem ipsum dolor sit amet consec adipis elit</a>
                                                </div>
                                            </div>
                                            <div class="tn-news">
                                                <div class="tn-img">
                                                    <img src="img/news-350x223-4.jpg">
                                                </div>
                                                <div class="tn-title">
                                                    <a href="">Lorem ipsum dolor sit amet consec adipis elit</a>
                                                </div>
                                            </div>
                                            <div class="tn-news">
                                                <div class="tn-img">
                                                    <img src="img/news-350x223-3.jpg">
                                                </div>
                                                <div class="tn-title">
                                                    <a href="">Lorem ipsum dolor sit amet consec adipis elit</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="sidebar-widget">
                                <div class="image">
                                    <a href="https://htmlcodex.com"><img src="img/ads-2.jpg" alt="Image"></a>
                                </div>
                            </div>

                            <div class="sidebar-widget">
                                <h2 class="sw-title">News Category</h2>
                                <div class="category">
                                    <ul>
                                       <!-- {% for category in categories %}
                                        
                                            <li><a href="">{{category.categorie}}</a><span>({{category.articles|length}})</span></li>
                                            
                                        {% endfor %} -->
                                    </ul>
                                </div>
                            </div>

                            <div class="sidebar-widget">
                                <div class="image">
                                    <a href="https://htmlcodex.com"><img src="img/ads-2.jpg" alt="Image"></a>
                                </div>
                            </div>
                            
                            <div class="sidebar-widget">
                                <h2 class="sw-title">Tags Cloud</h2>
                                <div class="tags">
                                {% for tag in tags %}
                                    <a href="">{{tag.tag}}</a>
                                {% endfor %} 
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        
    </main>
    <script>
        var toolbarOptions = [
                ['bold', 'italic','underline'],
                ['link', 'blockquote', 'code-block', 'image'],
                [{ list: 'ordered' }, { list: 'bullet' }],
                [{ 'color': [] }], 
                            ];

        var quill = new Quill('#editor', {
            modules: {
                toolbar: '#toolbar-container'
            },
            readOnly: true,
            theme: 'snow'
            });

        var form = document.querySelector('form'); 
        var cont = document.getElementById('editor').dataset.service;
        var json = '[' + cont +']';
        var content = eval(json);
        console.log([content[0] ] );
        //c = JSON.parse(content['ops']);
        quill.setContents(content[0]   );
        
    </script>

</div>
{% endblock %}
